(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){e.exports=a.p+"static/media/vote4.575600fe.png"},112:function(e,t,a){e.exports=a.p+"static/media/bus.8430821c.png"},113:function(e,t,a){e.exports=a(234)},118:function(e,t,a){},119:function(e,t,a){},153:function(e,t){},155:function(e,t){},190:function(e,t){},191:function(e,t){},234:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(108),s=a.n(r),o=(a(118),a(119),a(8)),i=a(9),l=a(11),u=a(10),m=a(12),h=a(27),p=a(23),d=a(26),v=a(109),E=a.n(v),b=a(120),f=function(e){return b("https://srvr.local:3001",{method:"POST",body:JSON.stringify({qry:e}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()})},g=a(69),O=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).handleChange=function(t,a){e.setState(Object(d.a)({},t,a.target.value))},e.setRedirect=function(){if(16!==e.state.username.length||0===e.state.pass.length)return alert("THIS IS NOT A JOKE!"),0;navigator.usb.requestDevice({filters:[]}).then(function(e){return e.productId+""+e.vendorId}).then(function(t){f("SELECT * FROM voters WHERE aid = '"+e.state.username+"'").then(function(a){var n=a.qry_res;if(console.log(n),t!==g.AES.decrypt(n[0].dhash,e.state.pass).toString(g.enc.Utf8))return alert("PLEASE CHECK ID & PASSWORD"),0;e.setState({user:n[0],redirect:!0})})})},e.state={username:"",pass:"",redirect:!1,user:""},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?(console.log(this.state.user),c.a.createElement(p.a,{to:{pathname:"/dashboard",state:{voter:this.state.user}}})):c.a.createElement("div",null,c.a.createElement("form",{className:"login"},c.a.createElement("img",{src:E.a,className:"logo",alt:"Logo"}),c.a.createElement("input",{type:"text",placeholder:"USERNAME",onChange:function(t){return e.handleChange("username",t)},className:"inp"}),c.a.createElement("input",{type:"password",placeholder:"PASSWORD",onChange:function(t){return e.handleChange("pass",t)},className:"inp"}),c.a.createElement("input",{type:"button",value:"CRUNCH",className:"inp-btn",onClick:this.setRedirect})))}}]),t}(n.Component),N=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"About"},"About!")}}]),t}(n.Component),j=a(20),C=a.n(j),y=a(32),S=a(69),k=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).handleChange=function(t,a){e.setState(Object(d.a)({},t,a.target.value))},e.handleSigner=function(t){var a=t.target;e.state.device?a.value="PLEASE MOVE FORWARD!":navigator.usb.requestDevice({filters:[]}).then(function(t){e.setState({deviceID:t.productId+""+t.vendorId,device:!0}),a.value="CONNECTED!"})},e.handleSubmit=Object(y.a)(C.a.mark(function t(){var a,n,c,r;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.deviceID,n=e.state.pin,t.next=4,e.setState({deviceID:S.AES.encrypt(a,n).toString()});case 4:console.log(e.state.deviceID),c="INSERT INTO voters (aid, name, email, number, vhash, dhash) VALUES ("+e.state.aid+", '"+e.state.name+"', '"+e.state.email+"', "+e.state.number+", '', '"+e.state.deviceID+"')",console.log(c),r="SELECT aid FROM voters WHERE aid="+e.state.aid,f(r).then(function(e){e.qry_res.length?alert("ALREADY REGISTERED!"):f(c).then(function(e){console.log(e),alert("SUBMITTED!")})});case 9:case"end":return t.stop()}},t)})),e.state={aid:"",name:"",email:"",number:"",deviceID:"",pin:"",device:!1},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"Register"},c.a.createElement("h3",{className:"vote-h3"},"REGISTRATION"),c.a.createElement("input",{type:"text",className:"inp",onChange:function(t){return e.handleChange("aid",t)},placeholder:"AADHAR"}),c.a.createElement("input",{type:"text",className:"inp",onChange:function(t){return e.handleChange("name",t)},placeholder:"NAME"}),c.a.createElement("input",{type:"text",className:"inp",onChange:function(t){return e.handleChange("email",t)},placeholder:"EMAIL"}),c.a.createElement("input",{type:"text",className:"inp",onChange:function(t){return e.handleChange("number",t)},placeholder:"NUMBER"}),c.a.createElement("input",{type:"password",className:"inp",onChange:function(t){return e.handleChange("pin",t)},placeholder:"PIN"}),c.a.createElement("input",{type:"text",className:"inp",onClick:function(t){return e.handleSigner(t)},readOnly:!0,value:"SIGNER NOT CONNECTED. CLICK ME!"}),c.a.createElement("input",{type:"button",className:"inp-btn",onClick:function(){return e.handleSubmit()},value:"SUBMIT"}),c.a.createElement("div",{className:"empty_space_bottom"}," "))}}]),t}(n.Component),A=a(112),I=a.n(A),T=a(149),D=function(e){return T.encrypt(e,"ZY5IElQwWQDV1EUwgtNoxiquknNKO9VskMPMY0xwWsdfsD4OblOjLZfKJEcISgpYVnF5t+A2OteNBY3qNYa2PWpkXPQwAwGnCqDcPYqNCYzgmjUNIe9xSsU4ra25EcvIpvKadALUP7ezGc3rK0p2GEbXJhHYij+7jWBEEKuy9hlNyXI0L+DkSIm7p4eac0XaIii8JQjfoNR0JZbBkAQQgRD1yyAICOPylkLGJExvVnovyBUh1Cb6LAc3SMrTx+mK14oGUrGBp6kABRTQgbV/YeRso+VNKS97oYecNQgQkwemAXXMkJoaejo9cyN0mTZNacxHR3OmVYQlDacrCbnYMw==")},R=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).handleChange=function(){var t=Object(y.a)(C.a.mark(function t(a){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({for:a.target.value});case 2:console.log(e.state);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.handleVote=function(){var t=e.props.user.aid+"---"+e.state.for;fetch("https://srvr.local:3001/vote",{method:"POST",body:JSON.stringify({vhash:D(t).cipher}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e.setState(t),alert("VOTED SUCCESSFULLY")})},e.state={for:1,voted:!1},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.vhash&&this.setState({voted:!0})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"dashboard2"},c.a.createElement("img",{src:I.a,className:"logo",alt:"img"}),c.a.createElement("h3",{className:"vote-h3"},"CAST YOUR VOTE"),c.a.createElement("select",{onChange:function(t){return e.handleChange(t)},className:"drp-dwn"},c.a.createElement("option",{value:"1"},"MODI"),c.a.createElement("option",{value:"2"},"PAPPU"),c.a.createElement("option",{value:"3"},"KEJRIWAL"),c.a.createElement("option",{value:"4"},"MAMTA")),c.a.createElement("input",{type:"button",className:"inp-btn",onClick:function(){return e.handleVote()},value:"VOTE",disabled:this.state.voted}))}}]),t}(n.Component),w=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={votes:[0,0,0,0],cands:["MODI","PAPPU","KEJRIWAL","MAMTA"],stage:[0,1,2,3]},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://srvr.local:3001/result",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({votes:t})})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"dashboard2"},c.a.createElement("div",{className:"results"},this.state.stage.map(function(t){return c.a.createElement("h5",{key:t},e.state.cands[t],":",e.state.votes[t])})))}}]),t}(n.Component),L=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).changeTile=function(){var t=Object(y.a)(C.a.mark(function t(a){var n,c,r;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({vote:!1}),t.next=3,Object.assign([],Object.keys(e.state).map(function(e){return a.target.id===e?Object(d.a)({},e,!0):Object(d.a)({},e,!1)})).forEach(function(t){e.setState(t)});case 3:for(n=0,c=Object.keys(e.state);n<c.length;n++)r=c[n],document.getElementById(r).className=e.state[r]?"sub-link sub-link-active":"sub-link";case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.handleLogout=function(){e.setState({logout:!0})},e.state={vote:!0,details:!1,logout:!1},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.state.logout?c.a.createElement(p.a,{to:"/"}):c.a.createElement("div",null,c.a.createElement("div",{className:"dashboard1"},c.a.createElement("div",{className:"title"},"MENU"),c.a.createElement("input",{type:"button",id:"vote",onClick:function(t){return e.changeTile(t)},value:"VOTE",className:"sub-link sub-link-active"}),c.a.createElement("input",{type:"button",id:"details",onClick:function(t){return e.changeTile(t)},value:"DETAILS",className:"sub-link"}),c.a.createElement("input",{type:"button",id:"logout",onClick:function(){return e.handleLogout()},value:"LOGOUT",className:"sub-link"})),!this.state.vote||c.a.createElement(R,{user:this.props.location.state.voter}),!this.state.details||c.a.createElement(w,null))}}]),t}(n.Component),M=function(e){function t(){var e;return Object(o.a)(this,t),e=Object(l.a)(this,Object(u.a)(t).call(this)),document.addEventListener("DOMContentLoaded",function(){for(var e=document.getElementsByClassName("nav-item"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){var e=document.getElementsByClassName("active");e[0].className=e[0].className.replace(" active",""),this.className+=" active"})}),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(h.a,null,c.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-fixed-top navbar-light custom-nav"},c.a.createElement("ul",{className:"navbar-nav"},c.a.createElement("li",{className:"navbar-brand"},"VOTECHAIN"),c.a.createElement("li",{className:"nav-item active"},c.a.createElement(h.b,{to:"/",className:"nav-link"},c.a.createElement("b",null,"Home"))),c.a.createElement("li",{className:"nav-item"},c.a.createElement(h.b,{to:"/register",className:"nav-link"},c.a.createElement("b",null,"Register"))),c.a.createElement("li",{className:"nav-item"},c.a.createElement(h.b,{to:"/about",className:"nav-link"},c.a.createElement("b",null,"About"))))),c.a.createElement("div",{className:"custom-nav-after"}),c.a.createElement(p.b,{exact:!0,path:"/",component:O}),c.a.createElement(p.b,{path:"/about",component:N}),c.a.createElement(p.b,{path:"/register",component:k}),c.a.createElement(p.b,{path:"/dashboard",component:L})))}}]),t}(n.Component);var x=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(233);s.a.render(c.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[113,1,2]]]);
//# sourceMappingURL=main.0442d91d.chunk.js.map